<link href="/public/app/v4.0/plugins/iCheck/square/blue.css" rel="stylesheet">
<script src="/public/app/v4.0/plugins/iCheck/icheck.min.js"></script>

<div class="margin-b-30 padding-b-30">
    <div class="new_table table flex-table">
        <!-- Cuerpo de la tabla -->
        <div class="table-body" id="tableBody">
            <!-- Filas de la tabla -->
            {{#if search_mov}}
            {{#each search_mov }}
            <div class="table-row">
                <!-- Detalles -->
                <div class="col-xs-10 col-sm-10 col-md-10 col-lg-10">
                    <div class="cell-left">
                        <!--div class="margin-0 ">
                                        <input type="checkbox" checked="" class="margin-r-10">
                                    </div-->
                        <div class="padding-0">
                            <div class="btn-group dropright">
                                <button id="var_btn_{{{_id}}}" id="var_btn_{{{_id}}}"
                                    onclick="cat_all_variations_get(this)" product_id="{{{_id}}}"
                                    variant_id="{{doc.variant_id}}" type="button" data-toggle="dropdown"
                                    aria-expanded="true">
                                    <div class="round-icon line">
                                           {{#ifCond category 'sell'}}
                                            <span class="material-icons">store </span>
                                            {{/ifCond}}
                                            {{#ifCond category 'purcharse'}}
                                            <span class="material-icons">local_shipping </span>
                                            {{/ifCond}}
                                              {{#ifCond category 'service_order'}}
                                            <span class="material-icons">devices_other  </span>
                                            {{/ifCond}}
                                            {{#ifCond category 'service_turn'}}
                                            <span class="material-icons">group_add</span>
                                            {{/ifCond}}
                                    </div>
                                </button>
                            </div>
                        </div>

                        <div class="padding-0 col-xs-12 col-sm-12 col-md-12 col-lg-12">
                            <div class="padding-0 col-xs-12 col-sm-12 col-md-4 col-lg-4">
                                <h5><span  class="text-uppercase margin-r-5 margin-top label bg-blue">{{mov_id}}</span> 
                                    <span  class="text-uppercase margin-r-5 margin-top label bg-gray">{{payment_type}}</span>
                                    </h5>
                                <h6>
                                 {{{client.first_name}}} {{{client.last_name}}}

                                </h6>
                            </div>
                            <div class="padding-t-10  col-xs-12 col-sm-12 col-md-8 col-lg-8">

                                <div class="padding-0  padding-b-5 col-xs-6 col-sm-6 col-md-6 col-lg-6">

                                    <div class="btn-group dropright">
                                        <button onclick="box_get_order_info(this)" doc_id="{{{doc._id}}}"
                                            id="variations_set_{{{doc._id}}}" product_id="{{{doc._id}}}"
                                            variant_id="{{doc.variant_id}}" id="catalog_get_menu_price" type="button"
                                            class=" " data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">

                                            <span id="bg-select-color"
                                                class="card_item_selected_price btn btn-transparent">
                                                {{#ifCond category 'purcharse'}}
                                                <div class="round-icon pr bg-red">
                                                    -
                                                </div>
                                                {{else}}
                                                <div class="round-icon pr bg-green">
                                                    +
                                                </div>
                                                {{/ifCond}}
                                                <label class="counter">
                                                    <span>
                                                        $
                                                    </span>
                                                    {{total}}
                                                </label>
                                                <span class="material-icons">arrow_drop_down</span>

                                            </span>

                                        </button>
                                        <ul class="dropdown-menu l pull-right">
                                            <list>
                                                Facturar
                                            </list>
                                            <list>
                                                Ver documento
                                            </list>
                                        </ul>
                                    </div>
                                </div>
                                <div class="padding-0 col-xs-6 col-sm-6 col-md-6 col-lg-6">
                                    <span class="material-icons">
                                        access_time
                                    </span>
                                    {{formatDate entry_date}}
                                </div>
                            </div>
                        </div>

                    </div>
                </div>
                <!-- Agregar Precio --><!-- Agregar Stock -->
                <div class=" cell-right col-xs-2 col-sm-2 col-md-2 col-lg-2">
                    <div class="pull-right">


                        {{#userCtx 'catalog' 'edit'}}

                        <!--div class="Switch" onclick="">
                                        <input id="{{{doc._id}}}_{{doc.variant_id}}_status_checkbox" name="switch_variation"
                                            {{#ifEquals doc.status.status true }} checked {{/ifEquals}} value="" type="checkbox"
                                            doc_id="{{{doc._id}}}" variant_id="{{doc.variant_id}}" input_id="status"
                                            onclick="cat_edit_chekbox(this)" />
                                        <label for="{{{doc._id}}}_{{doc.variant_id}}_status_checkbox" class="label-primary"></label>
                                    </div-->

                        <div class="margin-t-5 padding-10 indicator btn-group">
                            <button id="" type="button"
                                class="round padding-0  margin-5 dropdown-toggle dropdown-toggle-split btn btn-default pull-left "
                                data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                <span class="material-icons">more_vert</span>
                            </button>
                            <ul class="dropdown-menu pull-right">
                                <li>
                                    <a onclick="catalog_edit_item(this)" doc_id="{{{doc._id}}}"
                                        id="variations_set_{{{doc._id}}}" product_id="{{{doc._id}}}"
                                        variant_id="{{doc.variant_id}}" href="#">
                                        <span class="material-icons">
                                            create
                                        </span>
                                        <span>Editar</span>
                                    </a>
                                </li>
                                <li>
                                    <a onclick="catalog_product_delete(this)" doc_id="{{{doc._id}}}"
                                        variant_id="{{doc.variant_id}}" href="#">
                                        <span class="material-icons">
                                            delete
                                        </span>
                                        <span>Eliminar</span>
                                    </a>
                                </li>
                            </ul>
                        </div>
                        {{/userCtx}}
                    </div>
                </div>
            </div>
            {{/each}}
            {{else}}
            <div class="no-results">
                <i class="material-icons md-96">sentiment_very_dissatisfied</i>
                <p>No se encontraron resultados.</p>
            </div>
            {{/if}}
        </div>
    </div>
</div>

<script>


    // Hablilito el icheck para la clase checkbox
    $('.checkbox').iCheck({
        checkboxClass: 'icheckbox_square-blue',
        radioClass: 'iradio_square-blue',
        handle: '',
        increaseArea: '20%' // optional
    });
    $('input').on('ifChecked', function (event) {
        //  var select = $(this);
        //    var id = select.attr('id');
        //  //   $("#new-board-detail-1").show();
        //    $("#new-board-name").focus();
        ///   var board_type = $('input:radio[name=board-type]:checked').val();
        //   var board_icon = $(this).attr('icon');
        //  var board_bg = $(this).attr('bg-color');
        console.log(board_icon + board_bg)
        /*        if (board_type) {
        /*    $("#board-type-icon").show();
            $("#new-board-step-1").show();
            $("#new-board-name").focus();
            $("#bt-text-icon").attr('icon', board_icon);
            $("#bt-text-icon").children('.material-icons:first').text(board_icon);
            $("#bg-select-color-group").children('.material-icons:first').text(board_icon);
            $("#bg-select-color-group").attr('bg-color', board_bg);
            $("#bg-select-color-group").removeClass().addClass('btn ' + board_bg + ' line');*/
        /*     } else {
            //  $("#board-type-radio-5").hide();
        //    }*/
    });
    $(document).ready(function () {
        // Prevenir el cierre del menú desplegable al hacer clic dentro
        $('.dropdown-menu').on('click', function (e) {
            e.stopPropagation();
        });

        // Opcional: Si tienes elementos específicos en los que quieres prevenir el cierre, puedes ser más específico:
        $('.dropdown-menu select, .dropdown-menu button').on('click', function (e) {
            e.stopPropagation();
        });

        // Si estás usando elementos como botones para disparar alguna acción, asegúrate de que también manejas adecuadamente el evento para que realice lo que necesitas
        $('.dropdown-menu button').on('click', function (e) {
            // Tu código aquí, por ejemplo, para manejar la edición de un precio
            console.log("Botón dentro del menú desplegable presionado.");
        });
    });
    $(document).on('click', '.dropdown-menu-app .dropdown-toggle', function (e) {
        e.preventDefault();
        e.stopPropagation();
        // Toggle del segundo dropdown aquí, si es necesario
        $(this).next('.dropdown-menu').toggle();
    });

</script>