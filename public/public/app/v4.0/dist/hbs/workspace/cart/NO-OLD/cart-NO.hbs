<!--div id="nav-bar-copiled"></div-->
<!--MODULE NAV BAR COPILED-->
<div class="container-fluid" id="scroller">
    <!--Kanban template-->
    <div id="cart_catalog_compiled" class="cart_catalog">

    </div>
    <!--Kanban template-->
</div>

<div class="modal fade modal-primary" id="master_popup" tabindex="-1" role="dialog" aria-labelledby="presu-orden"
    data-backdrop="static" data-keyboard="false">
</div>

<!--- PLANTILLA  BODY NAVEGACION -->
<!--script src="<?php echo base_url() ?>public/dist/js/ventas_nube_board.js"></script-->

<script>
    ////----( VISTA NAV )----/////
    function get_nav_cart(m_id, m_t_id) {
        var url_now = getUrl();
        var m_id = url_now.m_id;
        var m_t_id = url_now.m_t_id;
        /*if(m_id == null){//Compruebo que la funcion no trae datos y los cargo de la url actual
              var m_id = url_now.m_id;
         }if(m_t_id == null){//Compruebo que la funcion no trae datos y los cargo de la url actual
         }*/
        var pacht = 'cart'; //CONTROLADOR PRINCIPAL
        var controler_data = 'cart_nav_data'; //NOMBRE DE CONTROLADOR DATA
        var controler_template = 'cart_nav_template'; //NOMBRE CONTROLADOR TEMPLATE      
        var id_copiled = '#nav_bar_compiled'; // ID DE COMPILACION //  
        var data = {
            m_id: m_id,
            m_t_id: m_t_id,
        }
        console.log('Get nav cart' + m_id);
        get_module(pacht, controler_data, controler_template, id_copiled, data); //ENVIO LOS PARAMETROS DEL ESTE MODULO AL CONTRUCTOR DE LA VISTA    
    };
   
    ////----( VISTA BOARD CONTENT  )----/////
    function get_cart_catalog() {
        var url_now = getUrl();
        var m_id = url_now.m_id;
        var m_t_id = url_now.m_t_id;
        var pacht = 'cart'; //CONTROLADOR PRINCIPAL
        var controler_data = 'cart_catalog_data'; //NOMBRE DE CONTROLADOR DATA
        var controler_template = 'cart_catalog_template'; //NOMBRE CONTROLADOR TEMPLATE      
        var id_copiled = '#cart_catalog_compiled'; // ID DE COMPILACION //  
        console.log('GET cart_catalog');
        get_all_module(m_id, m_t_id, pacht, controler_data, controler_template, id_copiled)
        // get_module(pacht, controler_data, controler_template, id_copiled, data); //ENVIO LOS PARAMETROS DEL ESTE MODULO AL CONTRUCTOR DE LA VISTA    
         get_nav_cart();
    };
    
    function get_search_board_items(search_m_input, m_id) {
        var url_now = getUrl();
        var m_id = url_now.m_id;
        var m_t_id = url_now.m_t_id;
        var pacht = 'search'; //CONTROLADOR PRINCIPAL
        var controler_data = 'search_card_product_data'; //NOMBRE DE CONTROLADOR DATA
        var controler_template = 'search_card_product_template'; //NOMBRE CONTROLADOR TEMPLATE      
        var id_copiled = '#card_product_result_items'; // ID DE COMPILACION //  
        var data = {
            m_id: m_id,
            search_m_input: search_m_input,
        }
        console.log(data);
        get_module(pacht, controler_data, controler_template, id_copiled, data); //ENVIO LOS PARAMETROS DEL ESTE MODULO AL CONTRUCTOR DE LA VISTA    
    };
    ////----( POPUP AGREGAR COLABORADOR  )----/////
    function get_board_group_Collaborator(m_id, m_t_id, m_s_id) {
        //  var url_now = getUrl();
        //  var m_id = url_now.m_id;
        //  var m_t_id = url_now.m_t_id;
        var pacht = 'board'; //CONTROLADOR PRINCIPAL
        var controler_data = 'collaborator_board_group_template_data'; //NOMBRE DE CONTROLADOR DATA
        var controler_template = 'collaborator_board_group_template'; //NOMBRE CONTROLADOR TEMPLATE      
        var id_copiled = '#master_popup'; // ID DE COMPILACION //  
        var data = {
            m_id: m_id,
            m_t_id: m_t_id,
            m_s_id: m_s_id,
        }
        console.log('llamada ajax 1');
        get_module(pacht, controler_data, controler_template, id_copiled, data); //ENVIO LOS PARAMETROS DEL ESTE MODULO AL CONTRUCTOR DE LA VISTA    
        $('#master_popup').modal('show');
    };
     ////----( POPUP AGREGAR COLABORADOR  )----/////
    $(document).on('click', '#new_board-btn', function (event) {
        var url_now = getUrl();
        //  var m_id = url_now.m_id;
        //  var m_t_id = url_now.m_t_id;
        var pacht = 'board'; //CONTROLADOR PRINCIPAL
        var controler_data = 'new_board_data'; //NOMBRE DE CONTROLADOR DATA
        var controler_template = 'new_board_template'; //NOMBRE CONTROLADOR TEMPLATE      
        var id_copiled = '#master_popup'; // ID DE COMPILACION //  
        var data = {
            //  m_id: m_id,
            //    search_m_input: search_m_input,
            /*    m_name: m_name,
           m_icon: m_icon,
           m_color: m_color,
           m_position: m_position,
           m_url: m_url,
               */
            /* or_board_finality:or_board_finality,
             or_board_type:or_board_type,
             or_board_color:or_board_color,
             or_board_icon:or_board_icon,
             */
            //  or_board_mode:or_board_mode,
            //  or_board_delivery_place:or_board_delivery_place,
            //  or_board_collect_and_deliver:or_board_collect_and_deliver,
        }
        console.log(data);
        get_module(pacht, controler_data, controler_template, id_copiled, data); //ENVIO LOS PARAMETROS DEL ESTE MODULO AL CONTRUCTOR DE LA VISTA    
        $('#master_popup').modal('show');
    });
    ////----( POPUP AGREGAR COLABORADOR  )----/////
    $(document).on('click', '#new_board_group_btn', function (event) {
        var url_now = getUrl();
        //  var m_id = url_now.m_id;
        //  var m_t_id = url_now.m_t_id;
        var pacht = 'board'; //CONTROLADOR PRINCIPAL
        var controler_data = 'new_board_group_data'; //NOMBRE DE CONTROLADOR DATA
        var controler_template = 'new_board_group_template'; //NOMBRE CONTROLADOR TEMPLATE      
        var id_copiled = '#master_popup'; // ID DE COMPILACION //  
        var data = {
            //  m_id: m_id,
            //    search_m_input: search_m_input,
        }
        console.log(data);
        get_module(pacht, controler_data, controler_template, id_copiled, data); //ENVIO LOS PARAMETROS DEL ESTE MODULO AL CONTRUCTOR DE LA VISTA    
        $('#master_popup').modal('show');
    });
    ////----( POPUP AGREGAR COLABORADOR  )----/////
    $(document).on('click', '#edit_board-btn', function (event) {
        //  alert('holaaaa');
        var url_now = getUrl();
        var m_id = url_now.m_id;
        var m_t_id = url_now.m_t_id;
        //  alert(m_id+ m_t_id);
        var pacht = 'board'; //CONTROLADOR PRINCIPAL
        var controler_data = 'edit_board_template_data'; //NOMBRE DE CONTROLADOR DATA
        var controler_template = 'edit_board_template'; //NOMBRE CONTROLADOR TEMPLATE      
        var id_copiled = '#master_popup'; // ID DE COMPILACION //  
        var data = {
            m_id: m_id,
            m_t_id: m_t_id,
        }
        console.log(data);
        get_module(pacht, controler_data, controler_template, id_copiled, data); //ENVIO LOS PARAMETROS DEL ESTE MODULO AL CONTRUCTOR DE LA VISTA    
        $('#master_popup').modal('show');
    });
    ////----( POPUP AGREGAR COLABORADOR  )----/////
    $(document).on('click', 'a.buttonNewCollaborator', function (event) {
        var url_now = getUrl();
        var m_id = url_now.m_id;
        var m_t_id = url_now.m_t_id;
        var m_s_id = $(this).attr('m_s_id');

        $('#save-new-coll').attr('m_s_id', m_s_id);

        get_board_group_Collaborator(m_id, m_t_id, m_s_id);
    });

 //get_nav_cart();
    ////----( EJECUTO TODAS LAS FUNCIONES UNA VEZ Q SE BAJE EL .HBS  )----/////
   $(document).ready(function () {
        window.onload =
            get_cart_catalog();
            get_nav_cart();
    });

</script>